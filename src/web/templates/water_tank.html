<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>豆苗プランター - 給水タンク管理</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/common.css') }}" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-success">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-seedling"></i> 豆苗プランター
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/dashboard">ダッシュボード</a>
                <a class="nav-link" href="/ai-consultation">AI相談</a>
                <a class="nav-link" href="/multi-camera">カメラ管理</a>
                <a class="nav-link active" href="/water-tank">給水タンク</a>
                <a class="nav-link" href="/records">記録</a>
                <a class="nav-link" href="/logs">ログ</a>
                <a class="nav-link" href="/settings">設定</a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">
                    <i class="fas fa-tint"></i> 給水タンク管理
                </h1>
            </div>
        </div>

        <!-- タンク状態 -->
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header text-center">
                        <h5><i class="fas fa-tint"></i> タンク状態</h5>
                    </div>
                    <div class="card-body text-center">
                        <div class="tank-visual" style="--water-level: 75%;"></div>
                        <div class="tank-label">給水タンク</div>
                        <div class="mt-3">
                            <div class="progress-circle" style="--progress: 270deg;">
                                <div class="progress-text">75%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-info-circle"></i> タンク情報</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <strong>現在の水量:</strong>
                                    <span id="current-volume">1500ml</span>
                                </div>
                                <div class="mb-3">
                                    <strong>タンク容量:</strong>
                                    <span id="tank-capacity">2000ml</span>
                                </div>
                                <div class="mb-3">
                                    <strong>残量率:</strong>
                                    <span id="percentage">75%</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <strong>状態:</strong>
                                    <span class="badge bg-success" id="tank-status">正常</span>
                                </div>
                                <div class="mb-3">
                                    <strong>推定残り日数:</strong>
                                    <span id="estimated-days">5日</span>
                                </div>
                                <div class="mb-3">
                                    <strong>最終補充:</strong>
                                    <span id="last-refill">2025-10-10</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 操作パネル -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-cogs"></i> タンク操作</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <button class="btn btn-primary w-100 mb-2" onclick="manualWatering()">
                                    <i class="fas fa-tint"></i> 手動給水
                                </button>
                            </div>
                            <div class="col-md-3">
                                <button class="btn btn-success w-100 mb-2" onclick="refillTank()">
                                    <i class="fas fa-plus"></i> タンク補充
                                </button>
                            </div>
                            <div class="col-md-3">
                                <button class="btn btn-warning w-100 mb-2" onclick="setInitialVolume()">
                                    <i class="fas fa-edit"></i> 初期水量設定
                                </button>
                            </div>
                            <div class="col-md-3">
                                <button class="btn btn-info w-100 mb-2" onclick="viewStatistics()">
                                    <i class="fas fa-chart-bar"></i> 使用統計
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 使用統計 -->
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-chart-line"></i> 使用統計（7日間）</h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-4">
                                <h4 class="text-primary" id="total-usage">3000ml</h4>
                                <small class="text-muted">総使用量</small>
                            </div>
                            <div class="col-4">
                                <h4 class="text-success" id="avg-daily">100ml</h4>
                                <small class="text-muted">1日平均</small>
                            </div>
                            <div class="col-4">
                                <h4 class="text-warning" id="efficiency">8.5</h4>
                                <small class="text-muted">効率スコア</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-history"></i> 最近の履歴</h5>
                    </div>
                    <div class="card-body">
                        <div id="recent-history">
                            <div class="d-flex justify-content-between mb-2">
                                <span>2025-10-15 09:00</span>
                                <span class="text-primary">給水: 100ml</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>2025-10-14 21:00</span>
                                <span class="text-primary">給水: 100ml</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>2025-10-10 10:00</span>
                                <span class="text-success">補充: 500ml</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/common.js') }}"></script>
    <script>
        // タンク状態を取得
        function loadTankStatus() {
            // モックデータ（実際の実装ではAPIから取得）
            document.getElementById('current-volume').textContent = '1500ml';
            document.getElementById('tank-capacity').textContent = '2000ml';
            document.getElementById('percentage').textContent = '75%';
            document.getElementById('tank-status').textContent = '正常';
            document.getElementById('estimated-days').textContent = '5日';
            document.getElementById('last-refill').textContent = '2025-10-10';
        }

        // 手動給水
        function manualWatering() {
            showNotification('手動給水機能は実装予定です', 'info');
        }

        // タンク補充
        function refillTank() {
            showNotification('タンク補充機能は実装予定です', 'info');
        }

        // 初期水量設定
        function setInitialVolume() {
            showNotification('初期水量設定機能は実装予定です', 'info');
        }

        // 使用統計表示
        function viewStatistics() {
            showNotification('使用統計機能は実装予定です', 'info');
        }

        // 初期化
        document.addEventListener('DOMContentLoaded', function() {
            loadTankStatus();
        });
    </script>
</body>
</html>
